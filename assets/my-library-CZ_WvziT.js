import{a as B,u as h,s as H,g as T,h as u,f as k,r as w}from"./loader-h0i4fzen.js";import{onAuthStateChanged as x}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";const C=()=>{const r=document.getElementById("library-grid"),s=document.getElementById("library-hero"),m=document.getElementById("library-hero-content"),o=document.getElementById("genre-filter-container"),f=document.getElementById("genre-header"),d=document.getElementById("genre-list"),y=document.getElementById("selected-genre-text");let l=[],n=document.getElementById("empty-library-msg");if(!n&&r&&(n=document.createElement("div"),n.id="empty-library-msg",n.className="empty-library is-hidden",n.innerHTML=`
      <p>OOPS...</p>
      <p>You haven't added any movies yet.</p>
      <a href="catalog.html" style="color:var(--primary-orange, orange); margin-top:15px; display:inline-block;">Go to Catalog</a>
    `,r.parentNode.insertBefore(n,r)),!r)return;async function v(){H(),r.innerHTML="",n&&n.classList.add("is-hidden"),o&&o.classList.add("is-hidden");try{const e=await T();if(!e||e.length===0){u(),n&&n.classList.remove("is-hidden"),s&&(s.style.backgroundImage="none"),m&&(m.innerHTML="<h1>Your Library is Empty</h1>");return}const t=e.map(a=>k(a));l=(await Promise.all(t)).filter(a=>a!==null),p(l),L(l),l.length>0&&s&&h(l[0].id,s,m)}catch(e){console.error("Kütüphane yüklenirken hata:",e),r.innerHTML='<p style="color:white; text-align:center;">Bir hata oluştu.</p>'}finally{u()}}function p(e){if(e.length===0){r.innerHTML='<p style="color:white; text-align:center; grid-column: 1/-1;">No movies found for this genre.</p>';return}r.innerHTML=e.map(t=>w(t)).join("")}function L(e){if(!d||!f)return;o&&o.classList.remove("is-hidden");const t=new Map;e.forEach(i=>{i.genres&&Array.isArray(i.genres)&&i.genres.forEach(c=>{t.set(c.id,c.name)})});let g='<div class="genre-item active" data-id="all">All Genres</div>';t.forEach((i,c)=>{g+=`<div class="genre-item" data-id="${c}">${i}</div>`}),d.innerHTML=g,f.onclick=i=>{i.stopPropagation(),d.classList.toggle("is-hidden"),o.classList.toggle("is-open")};const a=d.querySelectorAll(".genre-item");a.forEach(i=>{i.onclick=c=>{c.stopPropagation(),a.forEach(I=>I.classList.remove("active")),i.classList.add("active");const E=i.dataset.id,b=i.textContent;y&&(y.textContent=b),d.classList.add("is-hidden"),o.classList.remove("is-open"),M(E)}}),document.addEventListener("click",i=>{o.contains(i.target)||(d.classList.add("is-hidden"),o.classList.remove("is-open"))})}function M(e){let t=[];e==="all"?t=l:t=l.filter(g=>g.genres.some(a=>a.id.toString()===e.toString())),p(t),t.length>0&&s&&h(t[0].id,s,m)}x(B,e=>{v()}),r.addEventListener("click",e=>{const t=e.target.closest(".movie-card");t&&t.dataset.id&&s&&(h(t.dataset.id,s,m),window.scrollTo({top:0,behavior:"smooth"}))})};C();
//# sourceMappingURL=my-library-CZ_WvziT.js.map
